{"ast":null,"code":"import _slicedToArray from\"/Users/jacklunceford/Desktop/quiplash_drawing_game/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useEffect,useState}from'react';import{Redirect}from'react-router-dom';import socket from\"../socketConfig\";import firebase from'../firebase.js';function Final(props){var _useState=useState(props.location.state.code),_useState2=_slicedToArray(_useState,2),code=_useState2[0],setCode=_useState2[1];var _useState3=useState(props.location.state.name),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),players=_useState6[0],setPlayers=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),tempWinner=_useState8[0],setTempWinner=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),winner=_useState10[0],setWinner=_useState10[1];var _useState11=useState(-1),_useState12=_slicedToArray(_useState11,2),winningScore=_useState12[0],setWinningScore=_useState12[1];useEffect(function(){var db=firebase.firestore();db.collection(\"rooms\").where(\"code\",\"==\",code).get().then(function(querySnapshot){querySnapshot.docs.forEach(function(snapshot){snapshot.ref.collection(\"players\").get().then(function(querySnapshot){querySnapshot.docs.forEach(function(snapshot){setPlayers(function(players){return players.concat({name:snapshot.data().name,score:snapshot.data().votes});});if(snapshot.data().votes>winningScore){setWinningScore(snapshot.data().votes);setTempWinner(snapshot.data().player);}setWinner(tempWinner);});});});});},[]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,winner),/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"player\"),/*#__PURE__*/React.createElement(\"th\",null,\"score\"))),/*#__PURE__*/React.createElement(\"tbody\",null,players.map(function(player,idx){return/*#__PURE__*/React.createElement(\"tr\",{key:idx},/*#__PURE__*/React.createElement(\"td\",null,player.name),/*#__PURE__*/React.createElement(\"td\",null,player.score));}))));}export default Final;","map":{"version":3,"sources":["/Users/jacklunceford/Desktop/quiplash_drawing_game/react-app/src/pages/final.jsx"],"names":["React","useRef","useEffect","useState","Redirect","socket","firebase","Final","props","location","state","code","setCode","name","setName","players","setPlayers","tempWinner","setTempWinner","winner","setWinner","winningScore","setWinningScore","db","firestore","collection","where","get","then","querySnapshot","docs","forEach","snapshot","ref","concat","data","score","votes","player","map","idx"],"mappings":"mLAAA,MAAOA,CAAAA,KAAP,EAAgBC,MAAhB,CAAwBC,SAAxB,CAAmCC,QAAnC,KAAmD,OAAnD,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,MAAOC,CAAAA,MAAP,KAAmB,iBAAnB,CACA,MAAOC,CAAAA,QAAP,KAAqB,gBAArB,CAEA,QAASC,CAAAA,KAAT,CAAeC,KAAf,CAAsB,eACIL,QAAQ,CAACK,KAAK,CAACC,QAAN,CAAeC,KAAf,CAAqBC,IAAtB,CADZ,wCACbA,IADa,eACPC,OADO,8BAEIT,QAAQ,CAACK,KAAK,CAACC,QAAN,CAAeC,KAAf,CAAqBG,IAAtB,CAFZ,yCAEbA,IAFa,eAEPC,OAFO,8BAGUX,QAAQ,CAAC,EAAD,CAHlB,yCAGbY,OAHa,eAGJC,UAHI,8BAIgBb,QAAQ,EAJxB,yCAIbc,UAJa,eAIDC,aAJC,8BAKQf,QAAQ,EALhB,0CAKbgB,MALa,gBAKLC,SALK,gCAMoBjB,QAAQ,CAAC,CAAC,CAAF,CAN5B,2CAMbkB,YANa,gBAMCC,eAND,gBAQpBpB,SAAS,CAAC,UAAM,CACd,GAAMqB,CAAAA,EAAE,CAAGjB,QAAQ,CAACkB,SAAT,EAAX,CACAD,EAAE,CAACE,UAAH,CAAc,OAAd,EAAuBC,KAAvB,CAA6B,MAA7B,CAAqC,IAArC,CAA2Cf,IAA3C,EAAiDgB,GAAjD,GAAuDC,IAAvD,CAA4D,SAACC,aAAD,CAAmB,CAC7EA,aAAa,CAACC,IAAd,CAAmBC,OAAnB,CAA2B,SAACC,QAAD,CAAc,CACvCA,QAAQ,CAACC,GAAT,CAAaR,UAAb,CAAwB,SAAxB,EAAmCE,GAAnC,GAAyCC,IAAzC,CAA8C,SAACC,aAAD,CAAmB,CAC/DA,aAAa,CAACC,IAAd,CAAmBC,OAAnB,CAA2B,SAACC,QAAD,CAAc,CACvChB,UAAU,CAAC,SAAAD,OAAO,QAAIA,CAAAA,OAAO,CAACmB,MAAR,CAAe,CAACrB,IAAI,CAAEmB,QAAQ,CAACG,IAAT,GAAgBtB,IAAvB,CAA6BuB,KAAK,CAAEJ,QAAQ,CAACG,IAAT,GAAgBE,KAApD,CAAf,CAAJ,EAAR,CAAV,CACA,GAAIL,QAAQ,CAACG,IAAT,GAAgBE,KAAhB,CAAwBhB,YAA5B,CAA0C,CACxCC,eAAe,CAACU,QAAQ,CAACG,IAAT,GAAgBE,KAAjB,CAAf,CACAnB,aAAa,CAACc,QAAQ,CAACG,IAAT,GAAgBG,MAAjB,CAAb,CACD,CACDlB,SAAS,CAACH,UAAD,CAAT,CACD,CAPD,EAQD,CATD,EAUD,CAXD,EAYD,CAbD,EAcH,CAhBU,CAgBR,EAhBQ,CAAT,CAoBF,mBACI,4CACI,8BAAKE,MAAL,CADJ,cAEI,8CACA,8CACE,2CAAI,uCAAJ,cAAmB,sCAAnB,CADF,CADA,cAIA,iCACGJ,OAAO,CAACwB,GAAR,CAAY,SAACD,MAAD,CAASE,GAAT,CAAiB,CAC5B,mBACE,0BAAI,GAAG,CAAEA,GAAT,eACE,8BAAKF,MAAM,CAACzB,IAAZ,CADF,cAEE,8BAAKyB,MAAM,CAACF,KAAZ,CAFF,CADF,CAMD,CAPA,CADH,CAJA,CAFJ,CADJ,CAoBC,CAED,cAAe7B,CAAAA,KAAf","sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport socket from \"../socketConfig\";\nimport firebase from '../firebase.js';\n\nfunction Final(props) {\n  const [code, setCode] = useState(props.location.state.code);\n  const [name, setName] = useState(props.location.state.name);\n  const [players, setPlayers] = useState([]);\n  const [tempWinner, setTempWinner] = useState();\n  const [winner, setWinner] = useState();\n  const [winningScore, setWinningScore] = useState(-1);\n  \n  useEffect(() => {\n    const db = firebase.firestore();\n    db.collection(\"rooms\").where(\"code\", \"==\", code).get().then((querySnapshot) => {\n      querySnapshot.docs.forEach((snapshot) => {\n        snapshot.ref.collection(\"players\").get().then((querySnapshot) => {\n          querySnapshot.docs.forEach((snapshot) => {\n            setPlayers(players => players.concat({name: snapshot.data().name, score: snapshot.data().votes}));\n            if (snapshot.data().votes > winningScore) {\n              setWinningScore(snapshot.data().votes);\n              setTempWinner(snapshot.data().player);\n            }\n            setWinner(tempWinner);\n          });\n        });\n      });\n    });\n}, []);\n\n\n\nreturn (\n    <div>\n        <h1>{winner}</h1>\n        <table>\n        <thead>\n          <tr><th>player</th><th>score</th></tr>\n        </thead>\n        <tbody>\n          {players.map((player, idx) => {\n            return (\n              <tr key={idx}>\n                <td>{player.name}</td>\n                <td>{player.score}</td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div>\n    );\n}\n\nexport default Final;\n\n"]},"metadata":{},"sourceType":"module"}