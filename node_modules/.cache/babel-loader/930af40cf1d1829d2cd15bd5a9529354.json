{"ast":null,"code":"import _slicedToArray from\"/Users/jacklunceford/Desktop/quiplash_drawing_game/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useEffect,useState}from'react';import{Redirect}from'react-router-dom';import socket from\"../socketConfig\";import firebase from'../firebase.js';function Final(props){var _this=this;var code=useState(props.location.state.code);var name=useState(props.location.state.name);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),players=_useState2[0],setPlayers=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),tempWinner=_useState4[0],setTempWinner=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),winner=_useState6[0],setWinner=_useState6[1];var _useState7=useState(-1),_useState8=_slicedToArray(_useState7,2),winningScore=_useState8[0],setWinningScore=_useState8[1];useEffect(function(){var db=firebase.firestore();db.collection(\"rooms\").where(\"code\",\"==\",_this.state.code).collection(\"players\").onSnapshot(function(querySnapshot){querySnapshot.forEach(function(doc){setPlayers(function(players){return players.concat({name:doc.data().name,score:doc.data().votes});});if(doc.data().votes>winningScore){setWinningScore(doc.data().votes);setTempWinner(doc.data().player);}}).then(function(){setWinner(tempWinner);});});},[]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,winner),/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"player\"),/*#__PURE__*/React.createElement(\"th\",null,\"score\"))),/*#__PURE__*/React.createElement(\"tbody\",null,players.map(function(player,idx){return/*#__PURE__*/React.createElement(\"tr\",{key:idx},/*#__PURE__*/React.createElement(\"td\",null,player.name),/*#__PURE__*/React.createElement(\"td\",null,player.score));}))));}export default Final;","map":{"version":3,"sources":["/Users/jacklunceford/Desktop/quiplash_drawing_game/react-app/src/pages/final.jsx"],"names":["React","useRef","useEffect","useState","Redirect","socket","firebase","Final","props","code","location","state","name","players","setPlayers","tempWinner","setTempWinner","winner","setWinner","winningScore","setWinningScore","db","firestore","collection","where","onSnapshot","querySnapshot","forEach","doc","concat","data","score","votes","player","then","map","idx"],"mappings":"mLAAA,MAAOA,CAAAA,KAAP,EAAgBC,MAAhB,CAAwBC,SAAxB,CAAmCC,QAAnC,KAAmD,OAAnD,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,MAAOC,CAAAA,MAAP,KAAmB,iBAAnB,CACA,MAAOC,CAAAA,QAAP,KAAqB,gBAArB,CAEA,QAASC,CAAAA,KAAT,CAAeC,KAAf,CAAsB,gBACpB,GAAMC,CAAAA,IAAI,CAAGN,QAAQ,CAACK,KAAK,CAACE,QAAN,CAAeC,KAAf,CAAqBF,IAAtB,CAArB,CACA,GAAMG,CAAAA,IAAI,CAAGT,QAAQ,CAACK,KAAK,CAACE,QAAN,CAAeC,KAAf,CAAqBC,IAAtB,CAArB,CAFoB,cAGUT,QAAQ,CAAC,EAAD,CAHlB,wCAGbU,OAHa,eAGJC,UAHI,8BAIgBX,QAAQ,EAJxB,yCAIbY,UAJa,eAIDC,aAJC,8BAKQb,QAAQ,EALhB,yCAKbc,MALa,eAKLC,SALK,8BAMoBf,QAAQ,CAAC,CAAC,CAAF,CAN5B,yCAMbgB,YANa,eAMCC,eAND,eAQpBlB,SAAS,CAAC,UAAM,CACd,GAAMmB,CAAAA,EAAE,CAAGf,QAAQ,CAACgB,SAAT,EAAX,CACAD,EAAE,CAACE,UAAH,CAAc,OAAd,EAAuBC,KAAvB,CAA6B,MAA7B,CAAqC,IAArC,CAA2C,KAAI,CAACb,KAAL,CAAWF,IAAtD,EAA4Dc,UAA5D,CAAuE,SAAvE,EACOE,UADP,CACkB,SAACC,aAAD,CAAmB,CAC7BA,aAAa,CAACC,OAAd,CAAsB,SAACC,GAAD,CAAS,CAC7Bd,UAAU,CAAC,SAAAD,OAAO,QAAIA,CAAAA,OAAO,CAACgB,MAAR,CAAe,CAACjB,IAAI,CAAEgB,GAAG,CAACE,IAAJ,GAAWlB,IAAlB,CAAwBmB,KAAK,CAAEH,GAAG,CAACE,IAAJ,GAAWE,KAA1C,CAAf,CAAJ,EAAR,CAAV,CACA,GAAIJ,GAAG,CAACE,IAAJ,GAAWE,KAAX,CAAmBb,YAAvB,CAAqC,CACjCC,eAAe,CAACQ,GAAG,CAACE,IAAJ,GAAWE,KAAZ,CAAf,CACAhB,aAAa,CAACY,GAAG,CAACE,IAAJ,GAAWG,MAAZ,CAAb,CACH,CACF,CAND,EAMGC,IANH,CAMQ,UAAM,CACVhB,SAAS,CAACH,UAAD,CAAT,CACH,CARD,EASH,CAXL,EAYH,CAdU,CAcR,EAdQ,CAAT,CAkBF,mBACI,4CACI,8BAAKE,MAAL,CADJ,cAEI,8CACA,8CACE,2CAAI,uCAAJ,cAAmB,sCAAnB,CADF,CADA,cAIA,iCACGJ,OAAO,CAACsB,GAAR,CAAY,SAACF,MAAD,CAASG,GAAT,CAAiB,CAC5B,mBACE,0BAAI,GAAG,CAAEA,GAAT,eACE,8BAAKH,MAAM,CAACrB,IAAZ,CADF,cAEE,8BAAKqB,MAAM,CAACF,KAAZ,CAFF,CADF,CAMD,CAPA,CADH,CAJA,CAFJ,CADJ,CAoBC,CAED,cAAexB,CAAAA,KAAf","sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport socket from \"../socketConfig\";\nimport firebase from '../firebase.js';\n\nfunction Final(props) {\n  const code = useState(props.location.state.code);\n  const name = useState(props.location.state.name);\n  const [players, setPlayers] = useState([]);\n  const [tempWinner, setTempWinner] = useState();\n  const [winner, setWinner] = useState();\n  const [winningScore, setWinningScore] = useState(-1);\n  \n  useEffect(() => {\n    const db = firebase.firestore();\n    db.collection(\"rooms\").where(\"code\", \"==\", this.state.code).collection(\"players\")\n          .onSnapshot((querySnapshot) => {\n            querySnapshot.forEach((doc) => {\n              setPlayers(players => players.concat({name: doc.data().name, score: doc.data().votes}));\n              if (doc.data().votes > winningScore) {\n                  setWinningScore(doc.data().votes);\n                  setTempWinner(doc.data().player);\n              }\n            }).then(() => {\n                setWinner(tempWinner);\n            });\n        });\n}, []);\n\n\n\nreturn (\n    <div>\n        <h1>{winner}</h1>\n        <table>\n        <thead>\n          <tr><th>player</th><th>score</th></tr>\n        </thead>\n        <tbody>\n          {players.map((player, idx) => {\n            return (\n              <tr key={idx}>\n                <td>{player.name}</td>\n                <td>{player.score}</td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div>\n    );\n}\n\nexport default Final;\n\n"]},"metadata":{},"sourceType":"module"}