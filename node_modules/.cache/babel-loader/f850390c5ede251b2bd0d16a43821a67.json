{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jacklunceford/Desktop/quiplash_drawing_game/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jacklunceford/Desktop/quiplash_drawing_game/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/jacklunceford/Desktop/quiplash_drawing_game/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useEffect,useState}from'react';import socket from\"../socketConfig\";import firebase from'../firebase.js';import{Redirect}from'react-router-dom';import'./styles.css';function Result(props){var _useState=useState(props.location.state.code),_useState2=_slicedToArray(_useState,2),code=_useState2[0],setCode=_useState2[1];var _useState3=useState(props.location.state.name),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),winningPic=_useState6[0],setWinningPic=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),winningArtist=_useState8[0],setWinningArtist=_useState8[1];var _useState9=useState(props.location.state.round),_useState10=_slicedToArray(_useState9,2),round=_useState10[0],setRound=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),nextRoundTime=_useState12[0],setNextRoundTime=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),finalScoreTime=_useState14[0],setFinalScoreTime=_useState14[1];var _useState15=useState(props.location.state.groupSize),_useState16=_slicedToArray(_useState15,2),groupSize=_useState16[0],setGroupSize=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),word=_useState18[0],setWord=_useState18[1];useEffect(function(){var myAsyncFunc=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var db;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:db=firebase.firestore();_context.next=3;return db.collection(\"rooms\").where(\"code\",\"==\",code).get().then(function(querySnapshot){querySnapshot.docs.forEach(function(snapshot){snapshot.ref.collection(\"rounds\").where(\"round\",\"==\",round).get().then(function(querySnapshot){querySnapshot.docs.forEach(function(snapshot){snapshot.ref.collection(\"pictures\").orderBy(\"votes\",\"desc\").limit(1).get().then(function(querySnapshot){querySnapshot.docs.forEach(function(snapshot){setWinningPic(snapshot.data().dataURL);setWinningArtist(snapshot.data().artist);});});});});});});case 3:_context.next=5;return db.collection(\"rooms\").where(\"code\",\"==\",code).get().then(function(querySnapshot){querySnapshot.docs.forEach(function(snapshot){snapshot.ref.collection(\"rounds\").where(\"round\",\"==\",round).get().then(function(querySnapshot){querySnapshot.docs.forEach(function(snapshot){setWord(snapshot.data().word);});});});});case 5:socket.on(\"nextRound\",function(){setNextRoundTime(true);});socket.on(\"finalScore\",function(){setFinalScoreTime(true);});case 7:case\"end\":return _context.stop();}}},_callee);}));return function myAsyncFunc(){return _ref.apply(this,arguments);};}();myAsyncFunc();},[]);var nextRound=function nextRound(){if(round+1<=5){socket.emit(\"nextRound\",code);}else{socket.emit(\"finalScore\",code);}};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"center\"},/*#__PURE__*/React.createElement(\"h1\",null,word),/*#__PURE__*/React.createElement(\"h1\",null,winningArtist),/*#__PURE__*/React.createElement(\"button\",{onClick:nextRound},\"Next Round\")),/*#__PURE__*/React.createElement(\"img\",{src:winningPic,id:winningPic}),nextRoundTime?/*#__PURE__*/React.createElement(Redirect,{to:{pathname:'/game',state:{code:code,name:name,groupSize:groupSize,round:round+1}}}):null,finalScoreTime?/*#__PURE__*/React.createElement(Redirect,{to:{pathname:'/final',state:{code:code,name:name,groupSize:groupSize,round:round+1}}}):null);}export default Result;","map":{"version":3,"sources":["/Users/jacklunceford/Desktop/quiplash_drawing_game/react-app/src/pages/result.jsx"],"names":["React","useRef","useEffect","useState","socket","firebase","Redirect","Result","props","location","state","code","setCode","name","setName","winningPic","setWinningPic","winningArtist","setWinningArtist","round","setRound","nextRoundTime","setNextRoundTime","finalScoreTime","setFinalScoreTime","groupSize","setGroupSize","word","setWord","myAsyncFunc","db","firestore","collection","where","get","then","querySnapshot","docs","forEach","snapshot","ref","orderBy","limit","data","dataURL","artist","on","nextRound","emit","pathname"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport socket from \"../socketConfig\";\nimport firebase from '../firebase.js';\nimport { Redirect } from 'react-router-dom';\nimport './styles.css';\n\nfunction Result(props) {\n  const [code, setCode] = useState(props.location.state.code);\n  const [name, setName] = useState(props.location.state.name);\n  const [winningPic, setWinningPic] = useState();\n  const [winningArtist, setWinningArtist] = useState();\n  const [round, setRound] = useState(props.location.state.round);\n  const [nextRoundTime, setNextRoundTime] = useState(false);\n  const [finalScoreTime, setFinalScoreTime] = useState(false);\n  const [groupSize, setGroupSize] = useState(props.location.state.groupSize);\n  const [word, setWord] = useState();\n\n  useEffect(() => {\n    const myAsyncFunc = async() => {\n        const db = firebase.firestore();\n        await db.collection(\"rooms\").where(\"code\", \"==\", code).get().then((querySnapshot) => {\n            querySnapshot.docs.forEach((snapshot) => {\n                snapshot.ref.collection(\"rounds\").where(\"round\", \"==\", round).get().then((querySnapshot) => {\n                    querySnapshot.docs.forEach((snapshot) => {\n                        snapshot.ref.collection(\"pictures\").orderBy(\"votes\", \"desc\").limit(1).get().then((querySnapshot) => {\n                            querySnapshot.docs.forEach((snapshot) => {\n                                setWinningPic(snapshot.data().dataURL);\n                                setWinningArtist(snapshot.data().artist);\n                            });\n                        });\n                    });\n                });\n            });\n        });\n\n        await db.collection(\"rooms\").where(\"code\", \"==\", code).get().then((querySnapshot) => {\n            querySnapshot.docs.forEach((snapshot) => {\n                snapshot.ref.collection(\"rounds\").where(\"round\", \"==\", round).get().then((querySnapshot) => {\n                    querySnapshot.docs.forEach((snapshot) => {\n                        setWord(snapshot.data().word);\n                    });\n                });\n            });\n        });\n        socket.on(\"nextRound\", () => {\n            setNextRoundTime(true);\n        });\n        socket.on(\"finalScore\", () => {\n            setFinalScoreTime(true);\n        });\n    }\n    myAsyncFunc();\n}, []);\n\nconst nextRound = () => {\n    if (round + 1 <= 5) {\n        socket.emit(\"nextRound\", code);\n    }\n    else {\n        socket.emit(\"finalScore\", code);\n    }\n}\nreturn (\n    <div>\n        <div className=\"center\">\n            <h1>{word}</h1>\n            <h1>{winningArtist}</h1>\n            <button onClick={nextRound}>Next Round</button>\n        </div>\n        <img src={winningPic} id={winningPic}/>\n        {nextRoundTime ? <Redirect to={{pathname: '/game', state: {code: code, name: name, groupSize: groupSize, round: round + 1}}}/> : null }\n        {finalScoreTime ? <Redirect to={{pathname: '/final', state: {code: code, name: name, groupSize: groupSize, round: round + 1}}}/> : null }\n    </div>\n    );\n}\n\nexport default Result;"]},"metadata":{},"sourceType":"module"}