{"ast":null,"code":"import _slicedToArray from\"/Users/jacklunceford/Desktop/quiplash_drawing_game/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useEffect,useState}from'react';import{Redirect}from'react-router-dom';import socket from\"../socketConfig\";import firebase from'../firebase.js';import'../styles.css';function Final(props){var _useState=useState(props.location.state.code),_useState2=_slicedToArray(_useState,2),code=_useState2[0],setCode=_useState2[1];var _useState3=useState(props.location.state.name),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),players=_useState6[0],setPlayers=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),winner=_useState8[0],setWinner=_useState8[1];var _useState9=useState(-1),_useState10=_slicedToArray(_useState9,2),winningScore=_useState10[0],setWinningScore=_useState10[1];useEffect(function(){var db=firebase.firestore();db.collection(\"rooms\").where(\"code\",\"==\",code).get().then(function(querySnapshot){querySnapshot.docs.forEach(function(snapshot){snapshot.ref.collection(\"players\").get().then(function(querySnapshot){querySnapshot.docs.forEach(function(snapshot){setPlayers(function(players){return players.concat({name:snapshot.data().name,score:snapshot.data().score});});if(snapshot.data().score>winningScore){setWinningScore(snapshot.data().score);setWinner(snapshot.data().name);}});});});});},[]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"player\"),/*#__PURE__*/React.createElement(\"th\",null,\"total votes\"))),/*#__PURE__*/React.createElement(\"tbody\",null,players.map(function(player,idx){return/*#__PURE__*/React.createElement(\"tr\",{key:idx},/*#__PURE__*/React.createElement(\"td\",null,player.name),/*#__PURE__*/React.createElement(\"td\",null,player.score));}))),/*#__PURE__*/React.createElement(\"h1\",{className:\"headers\"},winner,\" wins with a score of \",winningScore,\" total votes!\"));}export default Final;","map":{"version":3,"sources":["/Users/jacklunceford/Desktop/quiplash_drawing_game/react-app/src/pages/final.jsx"],"names":["React","useRef","useEffect","useState","Redirect","socket","firebase","Final","props","location","state","code","setCode","name","setName","players","setPlayers","winner","setWinner","winningScore","setWinningScore","db","firestore","collection","where","get","then","querySnapshot","docs","forEach","snapshot","ref","concat","data","score","map","player","idx"],"mappings":"mLAAA,MAAOA,CAAAA,KAAP,EAAgBC,MAAhB,CAAwBC,SAAxB,CAAmCC,QAAnC,KAAmD,OAAnD,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,MAAOC,CAAAA,MAAP,KAAmB,iBAAnB,CACA,MAAOC,CAAAA,QAAP,KAAqB,gBAArB,CACA,MAAO,eAAP,CAEA,QAASC,CAAAA,KAAT,CAAeC,KAAf,CAAsB,eACIL,QAAQ,CAACK,KAAK,CAACC,QAAN,CAAeC,KAAf,CAAqBC,IAAtB,CADZ,wCACbA,IADa,eACPC,OADO,8BAEIT,QAAQ,CAACK,KAAK,CAACC,QAAN,CAAeC,KAAf,CAAqBG,IAAtB,CAFZ,yCAEbA,IAFa,eAEPC,OAFO,8BAGUX,QAAQ,CAAC,EAAD,CAHlB,yCAGbY,OAHa,eAGJC,UAHI,8BAIQb,QAAQ,EAJhB,yCAIbc,MAJa,eAILC,SAJK,8BAKoBf,QAAQ,CAAC,CAAC,CAAF,CAL5B,0CAKbgB,YALa,gBAKCC,eALD,gBAOpBlB,SAAS,CAAC,UAAM,CACd,GAAMmB,CAAAA,EAAE,CAAGf,QAAQ,CAACgB,SAAT,EAAX,CACAD,EAAE,CAACE,UAAH,CAAc,OAAd,EAAuBC,KAAvB,CAA6B,MAA7B,CAAqC,IAArC,CAA2Cb,IAA3C,EAAiDc,GAAjD,GAAuDC,IAAvD,CAA4D,SAACC,aAAD,CAAmB,CAC7EA,aAAa,CAACC,IAAd,CAAmBC,OAAnB,CAA2B,SAACC,QAAD,CAAc,CACvCA,QAAQ,CAACC,GAAT,CAAaR,UAAb,CAAwB,SAAxB,EAAmCE,GAAnC,GAAyCC,IAAzC,CAA8C,SAACC,aAAD,CAAmB,CAC/DA,aAAa,CAACC,IAAd,CAAmBC,OAAnB,CAA2B,SAACC,QAAD,CAAc,CACvCd,UAAU,CAAC,SAAAD,OAAO,QAAIA,CAAAA,OAAO,CAACiB,MAAR,CAAe,CAACnB,IAAI,CAAEiB,QAAQ,CAACG,IAAT,GAAgBpB,IAAvB,CAA6BqB,KAAK,CAAEJ,QAAQ,CAACG,IAAT,GAAgBC,KAApD,CAAf,CAAJ,EAAR,CAAV,CACA,GAAIJ,QAAQ,CAACG,IAAT,GAAgBC,KAAhB,CAAwBf,YAA5B,CAA0C,CACxCC,eAAe,CAACU,QAAQ,CAACG,IAAT,GAAgBC,KAAjB,CAAf,CACAhB,SAAS,CAACY,QAAQ,CAACG,IAAT,GAAgBpB,IAAjB,CAAT,CACD,CACF,CAND,EAOD,CARD,EASD,CAVD,EAWD,CAZD,EAaH,CAfU,CAeR,EAfQ,CAAT,CAmBF,mBACI,4CACI,8CACA,8CACE,2CAAI,uCAAJ,cAAmB,4CAAnB,CADF,CADA,cAIA,iCACGE,OAAO,CAACoB,GAAR,CAAY,SAACC,MAAD,CAASC,GAAT,CAAiB,CAC5B,mBACE,0BAAI,GAAG,CAAEA,GAAT,eACE,8BAAKD,MAAM,CAACvB,IAAZ,CADF,cAEE,8BAAKuB,MAAM,CAACF,KAAZ,CAFF,CADF,CAMD,CAPA,CADH,CAJA,CADJ,cAgBE,0BAAI,SAAS,CAAC,SAAd,EAAyBjB,MAAzB,0BAAuDE,YAAvD,iBAhBF,CADJ,CAoBC,CAED,cAAeZ,CAAAA,KAAf","sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport socket from \"../socketConfig\";\nimport firebase from '../firebase.js';\nimport '../styles.css';\n\nfunction Final(props) {\n  const [code, setCode] = useState(props.location.state.code);\n  const [name, setName] = useState(props.location.state.name);\n  const [players, setPlayers] = useState([]);\n  const [winner, setWinner] = useState();\n  const [winningScore, setWinningScore] = useState(-1);\n  \n  useEffect(() => {\n    const db = firebase.firestore();\n    db.collection(\"rooms\").where(\"code\", \"==\", code).get().then((querySnapshot) => {\n      querySnapshot.docs.forEach((snapshot) => {\n        snapshot.ref.collection(\"players\").get().then((querySnapshot) => {\n          querySnapshot.docs.forEach((snapshot) => {\n            setPlayers(players => players.concat({name: snapshot.data().name, score: snapshot.data().score}));\n            if (snapshot.data().score > winningScore) {\n              setWinningScore(snapshot.data().score);\n              setWinner(snapshot.data().name);\n            }\n          });\n        });\n      });\n    });\n}, []);\n\n\n\nreturn (\n    <div>\n        <table>\n        <thead>\n          <tr><th>player</th><th>total votes</th></tr>\n        </thead>\n        <tbody>\n          {players.map((player, idx) => {\n            return (\n              <tr key={idx}>\n                <td>{player.name}</td>\n                <td>{player.score}</td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n      <h1 className=\"headers\">{winner} wins with a score of {winningScore} total votes!</h1>\n    </div>\n    );\n}\n\nexport default Final;\n\n"]},"metadata":{},"sourceType":"module"}