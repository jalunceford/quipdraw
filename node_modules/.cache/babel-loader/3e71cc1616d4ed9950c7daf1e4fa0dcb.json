{"ast":null,"code":"import _slicedToArray from\"/Users/jacklunceford/Desktop/quiplash_drawing_game/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useEffect,useState}from'react';import socket from\"../socketConfig\";import firebase from'../firebase.js';function Game(props){var canvasRef=useRef(null);var contextRef=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isDrawing=_useState2[0],setIsDrawing=_useState2[1];var _useState3=useState(20),_useState4=_slicedToArray(_useState3,2),time=_useState4[0],setTime=_useState4[1];var code=useState(props.location.state.code);var name=useState(props.location.state.name);var round=useState(props.location.state.round);var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),voteTime=_useState6[0],setVoteTime=_useState6[1];var groupSize=useState(props.location.state.groupSize);useEffect(function(){var pictures=0;socket.on('picture',function(){pictures++;if(pictures==groupSize){setVoteTime(true);}});var canvas=canvasRef.current;canvas.width=window.innerWidth*2;canvas.height=window.innerHeight*2;canvas.style.width=\"\".concat(window.innerWidth,\"px\");canvas.style.height=\"\".concat(window.innerHeight,\"px\");var context=canvas.getContext(\"2d\");context.scale(2,2);context.lineCap=\"round\";context.strokeStyle=\"black\";context.lineWidth=5;contextRef.current=context;var interval=setInterval(function(){setTime(function(time){return time-1;});if(time==0){clearInterval(interval);var dataURL=canvasRef.current.toDataURL();var db=firebase.firestore();db.collection(\"rooms\").where(\"code\",\"==\",code).collection(\"rounds\").where(\"round\",\"==\",round).collection(\"pictures\").add({artist:name,dataURL:dataURL,votes:0}).then(function(){socket.emit(\"picture\",code);});}},1000);},[]);var startDrawing=function startDrawing(_ref){var nativeEvent=_ref.nativeEvent;var offsetX=nativeEvent.offsetX,offsetY=nativeEvent.offsetY;contextRef.current.beginPath();contextRef.current.moveTo(offsetX,offsetY);setIsDrawing(true);};var finishDrawing=function finishDrawing(){contextRef.current.closePath();setIsDrawing(false);};var draw=function draw(_ref2){var nativeEvent=_ref2.nativeEvent;if(!isDrawing){return;}var offsetX=nativeEvent.offsetX,offsetY=nativeEvent.offsetY;contextRef.current.lineTo(offsetX,offsetY);contextRef.current.stroke();};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,time),/*#__PURE__*/React.createElement(\"h2\",null,words[wordIndex]),/*#__PURE__*/React.createElement(\"canvas\",{onMouseDown:startDrawing,onMouseUp:finishDrawing,onMouseMove:draw,ref:canvasRef}),voteTime?/*#__PURE__*/React.createElement(Redirect,{to:{pathname:'/vote',state:{code:code,name:name,round:round,groupSize:groupSize}}}):null,\"}\");}export default Game;","map":{"version":3,"sources":["/Users/jacklunceford/Desktop/quiplash_drawing_game/react-app/src/pages/game.jsx"],"names":["React","useRef","useEffect","useState","socket","firebase","Game","props","canvasRef","contextRef","isDrawing","setIsDrawing","time","setTime","code","location","state","name","round","voteTime","setVoteTime","groupSize","pictures","on","canvas","current","width","window","innerWidth","height","innerHeight","style","context","getContext","scale","lineCap","strokeStyle","lineWidth","interval","setInterval","clearInterval","dataURL","toDataURL","db","firestore","collection","where","add","artist","votes","then","emit","startDrawing","nativeEvent","offsetX","offsetY","beginPath","moveTo","finishDrawing","closePath","draw","lineTo","stroke","words","wordIndex","pathname"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport socket from \"../socketConfig\";\nimport firebase from '../firebase.js';\n\nfunction Game(props) {\n\n  const canvasRef = useRef(null)\n  const contextRef = useRef(null)\n  const [isDrawing, setIsDrawing] = useState(false)\n  const [time, setTime] = useState(20);\n  const code = useState(props.location.state.code);\n  const name = useState(props.location.state.name);\n  const round = useState(props.location.state.round);\n  const [voteTime, setVoteTime] = useState(false);\n  const groupSize = useState(props.location.state.groupSize);\n\n  useEffect(() => {\n    let pictures = 0;\n    socket.on('picture', () => {\n      pictures ++;\n      if (pictures == groupSize) {\n        setVoteTime(true);\n      }\n    });\n    const canvas = canvasRef.current;\n    canvas.width = window.innerWidth * 2;\n    canvas.height = window.innerHeight * 2;\n    canvas.style.width = `${window.innerWidth}px`;\n    canvas.style.height = `${window.innerHeight}px`;\n\n    const context = canvas.getContext(\"2d\")\n    context.scale(2,2)\n    context.lineCap = \"round\"\n    context.strokeStyle = \"black\"\n    context.lineWidth = 5\n    contextRef.current = context;\n    const interval = setInterval(() => {\n        setTime( time => time - 1);\n        if (time == 0) {\n            clearInterval(interval);\n            let dataURL = canvasRef.current.toDataURL();\n            const db = firebase.firestore();\n            db.collection(\"rooms\").where(\"code\", \"==\", code).collection(\"rounds\").where(\"round\", \"==\", round).collection(\"pictures\").add({artist: name, dataURL: dataURL, votes: 0}).then(() => {\n              socket.emit(\"picture\", code);\n            });\n        }\n    }, 1000);\n  }, []);\n\n  const startDrawing = ({nativeEvent}) => {\n    const {offsetX, offsetY} = nativeEvent;\n    contextRef.current.beginPath()\n    contextRef.current.moveTo(offsetX, offsetY)\n    setIsDrawing(true)\n  }\n\n  const finishDrawing = () => {\n   contextRef.current.closePath()\n   setIsDrawing(false)\n  }\n\n  const draw = ({nativeEvent}) => {\n    if(!isDrawing){\n      return\n    }\n    const {offsetX, offsetY} = nativeEvent;\n    contextRef.current.lineTo(offsetX, offsetY)\n    contextRef.current.stroke()\n  }\n\n  return (\n    <div>\n        <h1>{time}</h1>\n        <h2>{words[wordIndex]}</h2>\n        <canvas\n        onMouseDown={startDrawing}\n        onMouseUp={finishDrawing}\n        onMouseMove={draw}\n        ref={canvasRef}\n        />\n        {voteTime ? <Redirect to={{pathname: '/vote', state: {code: code, name: name, round: round, groupSize: groupSize}}}/> : null }}\n    </div>\n    );\n}\n\nexport default Game;"]},"metadata":{},"sourceType":"module"}