{"ast":null,"code":"import _slicedToArray from\"/Users/jacklunceford/Desktop/quiplash_drawing_game/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useEffect,useState}from'react';import socket from\"../socketConfig\";import firebase from'../firebase.js';import{Redirect}from'react-router-dom';function Result(props){var code=useState(props.location.state.code);var name=useState(props.location.state.name);var _useState=useState(),_useState2=_slicedToArray(_useState,2),winningPic=_useState2[0],setWinningPic=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),winningArtist=_useState4[0],setWinningArtist=_useState4[1];var round=useState(props.location.state.round);var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),nextRoundTime=_useState6[0],setNextRoundTime=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),finalScoreTime=_useState8[0],setFinalScoreTime=_useState8[1];var groupSize=useState(props.location.state.groupSize);var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),word=_useState10[0],setWord=_useState10[1];useEffect(function(){var db=firebase.firestore();db.collection(\"rooms\").where(\"code\",\"==\",code).collection(\"rounds\").where(\"round\",\"==\",round).collection(\"pictures\").orderBy(\"votes\",\"desc\").limit(1).get().then(function(doc){setWinningPic(doc.data().dataURL);setWinningArtist(doc.data().artist);db.collection(\"rooms\").where(\"code\",\"==\",code).collection(\"rounds\").where(\"round\",\"==\",round).get().then(function(doc){setWord(doc.data().word);});});socket.on(\"nextRound\",function(){setNextRoundTime(true);});socket.on(\"finalScore\",function(){setFinalScoreTime(true);});},[]);var nextRound=function nextRound(){if(round+1<=5){socket.emit(\"nextRound\",code);}else{socket.emit(\"finalScore\",code);}};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,word),/*#__PURE__*/React.createElement(\"img\",{src:winningPic,id:winningPic}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:winningPic},winningArtist),/*#__PURE__*/React.createElement(\"button\",{id:\"done\",onClick:nextRound},\"Next Round\"),nextRoundTime?/*#__PURE__*/React.createElement(Redirect,{to:{pathname:'/game',state:{code:code,name:name,groupSize:groupSize,round:round+1}}}):null,finalScoreTime?/*#__PURE__*/React.createElement(Redirect,{to:{pathname:'/final',state:{code:code,name:name,groupSize:groupSize,round:round+1}}}):null);}export default Result;","map":{"version":3,"sources":["/Users/jacklunceford/Desktop/quiplash_drawing_game/react-app/src/pages/result.jsx"],"names":["React","useRef","useEffect","useState","socket","firebase","Redirect","Result","props","code","location","state","name","winningPic","setWinningPic","winningArtist","setWinningArtist","round","nextRoundTime","setNextRoundTime","finalScoreTime","setFinalScoreTime","groupSize","word","setWord","db","firestore","collection","where","orderBy","limit","get","then","doc","data","dataURL","artist","on","nextRound","emit","pathname"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport socket from \"../socketConfig\";\nimport firebase from '../firebase.js';\nimport { Redirect } from 'react-router-dom';\n\nfunction Result(props) {\n  const code = useState(props.location.state.code);\n  const name = useState(props.location.state.name);\n  const [winningPic, setWinningPic] = useState();\n  const [winningArtist, setWinningArtist] = useState();\n  const round = useState(props.location.state.round);\n  const [nextRoundTime, setNextRoundTime] = useState(false);\n  const [finalScoreTime, setFinalScoreTime] = useState(false);\n  const groupSize = useState(props.location.state.groupSize);\n  const [word, setWord] = useState();\n\n  useEffect(() => {\n    const db = firebase.firestore();\n    db.collection(\"rooms\").where(\"code\", \"==\", code).collection(\"rounds\").where(\"round\", \"==\", round).collection(\"pictures\").orderBy(\"votes\", \"desc\").limit(1).get().then((doc) => {\n        setWinningPic(doc.data().dataURL);\n        setWinningArtist(doc.data().artist);\n        db.collection(\"rooms\").where(\"code\", \"==\", code).collection(\"rounds\").where(\"round\", \"==\", round).get().then((doc) => {\n            setWord(doc.data().word);\n        });\n    });\n    socket.on(\"nextRound\", () => {\n        setNextRoundTime(true);\n    });\n    socket.on(\"finalScore\", () => {\n        setFinalScoreTime(true);\n    });\n\n}, []);\n\nconst nextRound = () => {\n    if (round + 1 <= 5) {\n        socket.emit(\"nextRound\", code);\n    }\n    else {\n        socket.emit(\"finalScore\", code);\n    }\n    \n}\n\n\n\n  return (\n    <div>\n        <h1>{word}</h1>\n        <img src={winningPic} id={winningPic}/>\n        <label htmlFor={winningPic}>{winningArtist}</label>\n        <button id=\"done\" onClick={nextRound}>Next Round</button>\n        {nextRoundTime ? <Redirect to={{pathname: '/game', state: {code: code, name: name, groupSize: groupSize, round: round + 1}}}/> : null }\n        {finalScoreTime ? <Redirect to={{pathname: '/final', state: {code: code, name: name, groupSize: groupSize, round: round + 1}}}/> : null }\n    </div>\n    );\n}\n\nexport default Result;"]},"metadata":{},"sourceType":"module"}