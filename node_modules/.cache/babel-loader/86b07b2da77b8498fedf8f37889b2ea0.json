{"ast":null,"code":"import _slicedToArray from\"/Users/jacklunceford/Desktop/quiplash_drawing_game/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useEffect,useState}from'react';import socket from\"./socketConfig\";import firebase from'./firebase.js';function Result(props){var code=useState(props.location.state.code);var name=useState(props.location.state.name);var _useState=useState(),_useState2=_slicedToArray(_useState,2),winningPic=_useState2[0],setWinningPic=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),winningArtist=_useState4[0],setWinningArtist=_useState4[1];var round=useState(props.location.state.round);var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),nextRoundTime=_useState6[0],setNextRoundTime=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),finalScoreTime=_useState8[0],setFinalScoreTime=_useState8[1];var groupSize=useState(props.location.state.groupSize);var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),word=_useState10[0],setWord=_useState10[1];useEffect(function(){var db=firebase.firestore();db.collection(\"rooms\").where(\"code\",\"==\",code).collection(\"rounds\").where(\"round\",\"==\",round).collection(\"pictures\").orderBy(\"votes\",Direction.DESCENDING).limit(1).get().then(function(doc){setWinningPic(doc.data().dataURL);setWinningArtist(doc.data().artist);db.collection(\"rooms\").where(\"code\",\"==\",code).collection(\"rounds\").where(\"round\",\"==\",round).get().then(function(doc){setWord(doc.data().word);});});socket.on(\"nextRound\",function(){setNextRoundTime(true);});socket.on(\"finalScore\",function(){setFinalScoreTime(true);});},[]);nextRound=function nextRound(){if(round+1<=5){socket.emit(\"nextRound\",code);}else{socket.emit(\"finalScore\",code);}};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,word),/*#__PURE__*/React.createElement(\"img\",{src:winningPic,id:winningPic}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:winningPic},winningArtist),/*#__PURE__*/React.createElement(\"button\",{id:\"done\",onClick:nextRound},\"Next Round\"),nextRoundTime?/*#__PURE__*/React.createElement(Redirect,{to:{pathname:'/game',state:{code:code,name:name,groupSize:groupSize,round:round+1}}}):null,\"}\",finalScoreTime?/*#__PURE__*/React.createElement(Redirect,{to:{pathname:'/final',state:{code:code,name:name,groupSize:groupSize,round:round+1}}}):null,\"}\");}export default Result;","map":{"version":3,"sources":["/Users/jacklunceford/Desktop/quiplash_drawing_game/react-app/src/pages/result.jsx"],"names":["React","useRef","useEffect","useState","socket","firebase","Result","props","code","location","state","name","winningPic","setWinningPic","winningArtist","setWinningArtist","round","nextRoundTime","setNextRoundTime","finalScoreTime","setFinalScoreTime","groupSize","word","setWord","db","firestore","collection","where","orderBy","Direction","DESCENDING","limit","get","then","doc","data","dataURL","artist","on","nextRound","emit","pathname"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport socket from \"./socketConfig\";\nimport firebase from './firebase.js';\n\nfunction Result(props) {\n  const code = useState(props.location.state.code);\n  const name = useState(props.location.state.name);\n  const [winningPic, setWinningPic] = useState();\n  const [winningArtist, setWinningArtist] = useState();\n  const round = useState(props.location.state.round);\n  const [nextRoundTime, setNextRoundTime] = useState(false);\n  const [finalScoreTime, setFinalScoreTime] = useState(false);\n  const groupSize = useState(props.location.state.groupSize);\n  const [word, setWord] = useState();\n\n  useEffect(() => {\n    const db = firebase.firestore();\n    db.collection(\"rooms\").where(\"code\", \"==\", code).collection(\"rounds\").where(\"round\", \"==\", round).collection(\"pictures\").orderBy(\"votes\", Direction.DESCENDING).limit(1).get().then((doc) => {\n        setWinningPic(doc.data().dataURL);\n        setWinningArtist(doc.data().artist);\n        db.collection(\"rooms\").where(\"code\", \"==\", code).collection(\"rounds\").where(\"round\", \"==\", round).get().then((doc) => {\n            setWord(doc.data().word);\n        });\n    });\n    socket.on(\"nextRound\", () => {\n        setNextRoundTime(true);\n    });\n    socket.on(\"finalScore\", () => {\n        setFinalScoreTime(true);\n    });\n\n}, []);\n\nnextRound = () => {\n    if (round + 1 <= 5) {\n        socket.emit(\"nextRound\", code);\n    }\n    else {\n        socket.emit(\"finalScore\", code);\n    }\n    \n}\n\n\n\n  return (\n    <div>\n        <h1>{word}</h1>\n        <img src={winningPic} id={winningPic}/>\n        <label htmlFor={winningPic}>{winningArtist}</label>\n        <button id=\"done\" onClick={nextRound}>Next Round</button>\n        {nextRoundTime ? <Redirect to={{pathname: '/game', state: {code: code, name: name, groupSize: groupSize, round: round + 1}}}/> : null }}\n        {finalScoreTime ? <Redirect to={{pathname: '/final', state: {code: code, name: name, groupSize: groupSize, round: round + 1}}}/> : null }}\n    </div>\n    );\n}\n\nexport default Result;"]},"metadata":{},"sourceType":"module"}