{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jacklunceford/Desktop/quiplash_drawing_game/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jacklunceford/Desktop/quiplash_drawing_game/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/jacklunceford/Desktop/quiplash_drawing_game/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useEffect,useState}from'react';import socket from\"../socketConfig\";import firebase from'../firebase.js';import{Redirect}from'react-router-dom';function Vote(props){var _useState=useState(props.location.state.code),_useState2=_slicedToArray(_useState,2),code=_useState2[0],setCode=_useState2[1];var _useState3=useState(props.location.state.name),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),pictures=_useState6[0],setPictures=_useState6[1];var _useState7=useState(props.location.state.round),_useState8=_slicedToArray(_useState7,2),round=_useState8[0],setRound=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),resultTime=_useState10[0],setResultTime=_useState10[1];var _useState11=useState(props.location.state.groupSize),_useState12=_slicedToArray(_useState11,2),groupSize=_useState12[0],setGroupSize=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),vote=_useState14[0],setVote=_useState14[1];var inputRef=useRef(null);var _useState15=useState(30),_useState16=_slicedToArray(_useState15,2),time=_useState16[0],setTime=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),word=_useState18[0],setWord=_useState18[1];var _useState19=useState(),_useState20=_slicedToArray(_useState19,2),artist=_useState20[0],setArtist=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),voting=_useState22[0],setVoting=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),doneVoting=_useState24[0],setDoneVoting=_useState24[1];useEffect(function(){setVoting(true);var numVotes=0;socket.on(\"vote\",function(){numVotes++;if(numVotes==groupSize){setResultTime(true);}});var db=firebase.firestore();var myAsyncFunc=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var time2,interval;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getWord();case 2:_context.next=4;return db.collection(\"rooms\").where(\"code\",\"==\",code).get().then(function(querySnapshot){querySnapshot.docs.forEach(function(snapshot){snapshot.ref.collection(\"rounds\").where(\"round\",\"==\",round).get().then(function(querySnapshot){querySnapshot.docs.forEach(function(snapshot){snapshot.ref.collection(\"pictures\").get().then(function(querySnapshot){querySnapshot.docs.forEach(function(doc){setPictures(function(pictures){return pictures.concat({picture:doc.data().dataURL,artist:doc.data().artist});});});});});});});});case 4:time2=30;interval=setInterval(function(){time2=time2-1;setTime(function(time){return time-1;});if(time2==0){clearInterval(interval);setResultTime(true);}},1000);case 6:case\"end\":return _context.stop();}}},_callee);}));return function myAsyncFunc(){return _ref.apply(this,arguments);};}();myAsyncFunc();},[]);var updateVote=function updateVote(event){setVote({vote:event.target.value});};var submitVote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var votedArtist,db;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setVoting(false);setDoneVoting(true);votedArtist=pictures[vote.vote].artist;console.log(votedPicture);db=firebase.firestore();_context2.next=7;return db.collection(\"rooms\").where(\"code\",\"==\",code).get().then(function(querySnapshot){querySnapshot.docs.forEach(function(snapshot){snapshot.ref.collection(\"rounds\").where(\"round\",\"==\",round).get().then(function(querySnapshot){querySnapshot.docs.forEach(function(snapshot){snapshot.ref.collection(\"pictures\").where(\"artist\",\"==\",votedArtist).get().then(function(querySnapshot){querySnapshot.docs.forEach(function(snapshot){console.log(\"vote about to be counted for \"+snapshot.data().artist);setArtist(snapshot.data().artist);snapshot.ref.update({votes:firebase.firestore.FieldValue.increment(1)});});});});});});});case 7:db.collection(\"rooms\").where(\"code\",\"==\",code).get().then(function(querySnapshot){querySnapshot.docs.forEach(function(snapshot){snapshot.ref.collection(\"players\").where(\"name\",\"==\",artist).get().then(function(querySnapshot){querySnapshot.docs.forEach(function(snapshot){console.log(\"total vote added to \"+artist);snapshot.ref.update({votes:firebase.firestore.FieldValue.increment(1)}).then(function(){socket.emit(\"vote\",code);});});});});});case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function submitVote(){return _ref2.apply(this,arguments);};}();var getWord=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var db;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:db=firebase.firestore();db.collection(\"rooms\").where(\"code\",\"==\",code).get().then(function(querySnapshot){querySnapshot.docs.forEach(function(snapshot){snapshot.ref.collection(\"rounds\").where(\"round\",\"==\",round).get().then(function(querySnapshot){querySnapshot.docs.forEach(function(snapshot){setWord(snapshot.data().word);});});});});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function getWord(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,time),/*#__PURE__*/React.createElement(\"h1\",null,word),pictures.map(function(picture,idx){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"a\",{href:picture,download:true},idx));}),voting?/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"vote\",onChange:updateVote,ref:inputRef}):null,voting?/*#__PURE__*/React.createElement(\"button\",{id:\"done\",onClick:submitVote},\"Done\"):null,doneVoting?/*#__PURE__*/React.createElement(\"h2\",null,\"Waiting for other players to submit their votes...\"):null,resultTime?/*#__PURE__*/React.createElement(Redirect,{to:{pathname:'/result',state:{code:code,name:name,groupSize:groupSize,round:round}}}):null);}export default Vote;","map":{"version":3,"sources":["/Users/jacklunceford/Desktop/quiplash_drawing_game/react-app/src/pages/vote.jsx"],"names":["React","useRef","useEffect","useState","socket","firebase","Redirect","Vote","props","location","state","code","setCode","name","setName","pictures","setPictures","round","setRound","resultTime","setResultTime","groupSize","setGroupSize","vote","setVote","inputRef","time","setTime","word","setWord","artist","setArtist","voting","setVoting","doneVoting","setDoneVoting","numVotes","on","db","firestore","myAsyncFunc","getWord","collection","where","get","then","querySnapshot","docs","forEach","snapshot","ref","doc","concat","picture","data","dataURL","time2","interval","setInterval","clearInterval","updateVote","event","target","value","submitVote","votedArtist","console","log","votedPicture","update","votes","FieldValue","increment","emit","map","idx","pathname"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport socket from \"../socketConfig\";\nimport firebase from '../firebase.js';\nimport { Redirect } from 'react-router-dom';\n\nfunction Vote(props) {\n  const [code, setCode] = useState(props.location.state.code);\n  const [name, setName] = useState(props.location.state.name);\n  const [pictures, setPictures] = useState([]);\n  const [round, setRound] = useState(props.location.state.round);\n  const [resultTime, setResultTime] = useState(false);\n  const [groupSize, setGroupSize] = useState(props.location.state.groupSize);\n  const [vote, setVote] = useState();\n  const inputRef = useRef(null);\n  const [time, setTime] = useState(30);\n  const [word, setWord] = useState();\n  const [artist, setArtist] = useState();\n  const [voting, setVoting] = useState(false);\n  const [doneVoting, setDoneVoting] = useState(false);\n\n  useEffect(() => {\n    setVoting(true);\n    let numVotes = 0;\n    socket.on(\"vote\", () => {\n        numVotes ++;\n        if (numVotes == groupSize) {\n            setResultTime(true);\n        }\n    });\n    const db = firebase.firestore();\n    const myAsyncFunc = async() =>{\n        await getWord();\n        await db.collection(\"rooms\").where(\"code\", \"==\", code).get().then((querySnapshot) => {\n            querySnapshot.docs.forEach((snapshot) => {\n                snapshot.ref.collection(\"rounds\").where(\"round\", \"==\", round).get().then((querySnapshot) => {\n                    querySnapshot.docs.forEach((snapshot) => {\n                        snapshot.ref.collection(\"pictures\").get().then((querySnapshot) => {\n                            querySnapshot.docs.forEach((doc) => {\n                                setPictures(pictures => pictures.concat({picture: doc.data().dataURL, artist: doc.data().artist}));\n                            });\n                        });\n                    });\n                });\n            });\n        });\n        let time2 = 30;\n        const interval = setInterval(() => {\n            time2 = time2 - 1;\n            setTime( time => time - 1);\n            if (time2 == 0) {\n                clearInterval(interval);\n                setResultTime(true);\n            }\n        }, 1000);\n    }\n    myAsyncFunc();\n}, []);\n\n  const updateVote = (event) => {\n      setVote({vote: event.target.value});\n  }\n\n  const submitVote = async() => {\n      setVoting(false);\n      setDoneVoting(true);\n      let votedArtist = pictures[vote.vote].artist;\n      console.log(votedPicture);\n      const db = firebase.firestore();\n      await db.collection(\"rooms\").where(\"code\", \"==\", code).get().then((querySnapshot) => {\n          querySnapshot.docs.forEach((snapshot) => {\n              snapshot.ref.collection(\"rounds\").where(\"round\", \"==\", round).get().then((querySnapshot) => {\n                  querySnapshot.docs.forEach((snapshot) => {\n                      snapshot.ref.collection(\"pictures\").where(\"artist\", \"==\", votedArtist).get().then((querySnapshot) => {\n                          querySnapshot.docs.forEach((snapshot) => {\n                              console.log(\"vote about to be counted for \" + snapshot.data().artist);\n                              setArtist(snapshot.data().artist);\n                              snapshot.ref.update({votes : firebase.firestore.FieldValue.increment(1)})\n                            });\n                        });\n                    });\n                });\n            });\n        });\n\n        db.collection(\"rooms\").where(\"code\", \"==\", code).get().then((querySnapshot) => {\n            querySnapshot.docs.forEach((snapshot) => {\n                snapshot.ref.collection(\"players\").where(\"name\", \"==\", artist).get().then((querySnapshot) => {\n                    querySnapshot.docs.forEach((snapshot) => {\n                        console.log(\"total vote added to \" + artist);\n                        snapshot.ref.update({\n                            votes : firebase.firestore.FieldValue.increment(1)\n                        }).then(() => {\n                            socket.emit(\"vote\", code);\n                        });\n                    });\n                });\n            });\n        });\n    }\n\n    const getWord = async() => {\n        const db = firebase.firestore();\n        db.collection(\"rooms\").where(\"code\", \"==\", code).get().then((querySnapshot) => {\n          querySnapshot.docs.forEach((snapshot) => {\n            snapshot.ref.collection(\"rounds\").where(\"round\", \"==\", round).get().then((querySnapshot) => {\n              querySnapshot.docs.forEach((snapshot) => {\n                  setWord(snapshot.data().word);\n              });\n          });\n      });\n    });\n    }\n\n  return (\n    <div>\n        <h1>{time}</h1>\n        <h1>{word}</h1>\n        {pictures.map((picture, idx) => {\n            return (<div>\n                        <a href={picture} download>{idx}</a>\n                    </div>)\n                        })}\n        {voting ? <input type=\"text\" id=\"vote\" onChange={updateVote} ref={inputRef}/> : null }\n        {voting ? <button id=\"done\" onClick={submitVote}>Done</button> : null }\n        {doneVoting ? <h2>Waiting for other players to submit their votes...</h2> : null}\n        {resultTime ? <Redirect to={{pathname: '/result', state: {code: code, name: name, groupSize: groupSize, round: round}}}/> : null }\n    </div>\n    );\n}\n\nexport default Vote;"]},"metadata":{},"sourceType":"module"}